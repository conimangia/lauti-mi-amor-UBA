<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Malla Curricular Dise침o Gr치fico Interactiva</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #001f4d; /* Azul oscuro */
    color: #cce6ff; /* Azul claro */
    padding: 20px;
  }
  .materia {
    border: 2px solid #3399ff;
    border-radius: 12px;
    background: #004080;
    padding: 10px 20px;
    margin: 8px 0;
    display: flex;
    align-items: center;
    user-select: none;
  }
  .materia.aprobada {
    background: #0073e6;
    text-decoration: line-through;
  }
  .materia.bloqueada {
    opacity: 0.5;
    cursor: not-allowed;
  }
  h1, h2 {
    color: #99ccff;
    user-select: none;
  }
  h2 {
    border-bottom: 2px solid #3399ff;
    padding-bottom: 5px;
  }
  input[type="checkbox"] {
    width: 20px;
    height: 20px;
    cursor: pointer;
  }
  input[type="checkbox"]:disabled {
    cursor: not-allowed;
  }
</style>
</head>
<body>

<h1>Malla Curricular Dise침o Gr치fico</h1>

<div id="malla-container"></div>

<script>
  // Definici칩n de materias con correlativas
  const materias = [
    { id: "MCSyE", nombre: "Introducci칩n al Conocimiento de la Sociedad y el Estado", anio: 1, correlativas: [] },
    { id: "IPC", nombre: "Introducci칩n al Pensamiento Cient칤fico", anio: 1, correlativas: [] },
    { id: "ICP1", nombre: "Introducci칩n al Conocimiento Proyectual I", anio: 1, correlativas: [] },
    { id: "ICP2", nombre: "Introducci칩n al Conocimiento Proyectual II", anio: 1, correlativas: ["ICP1"] },
    { id: "MAT", nombre: "Matem치tica", anio: 1, correlativas: [] },
    { id: "SEM", nombre: "Semiolog칤a", anio: 1, correlativas: [] },
    { id: "TD", nombre: "Taller de Dibujo", anio: 1, correlativas: [] },

    { id: "DG1", nombre: "Dise침o Gr치fico I", anio: 2, correlativas: ["MCSyE", "IPC", "ICP1", "ICP2", "MAT", "SEM", "TD"] },
    { id: "M1", nombre: "Morfolog칤a I", anio: 2, correlativas: ["MCSyE", "IPC", "ICP1", "ICP2", "MAT", "SEM", "TD"] },
    { id: "TIP1", nombre: "Tipograf칤a I", anio: 2, correlativas: ["MCSyE", "IPC", "ICP1", "ICP2", "MAT", "SEM", "TD"] },
    { id: "C1", nombre: "Comunicaci칩n I", anio: 2, correlativas: ["MCSyE", "IPC", "ICP1", "ICP2", "MAT", "SEM", "TD"] },
    { id: "H1", nombre: "Historia I", anio: 2, correlativas: ["MCSyE", "IPC", "ICP1", "ICP2", "MAT", "SEM", "TD"] },
    { id: "TEC1", nombre: "Tecnolog칤a I", anio: 2, correlativas: ["MCSyE", "IPC", "ICP1", "ICP2", "MAT", "SEM", "TD"] },
    { id: "ELEC1", nombre: "Electiva I (Fotograf칤a o Ilustraci칩n)", anio: 2, correlativas: ["MCSyE", "IPC", "ICP1", "ICP2", "MAT", "SEM", "TD"] },

    { id: "DG2", nombre: "Dise침o Gr치fico II", anio: 3, correlativas: ["DG1", "M1", "TIP1", "C1", "H1", "TEC1"] },
    { id: "M2", nombre: "Morfolog칤a II", anio: 3, correlativas: ["M1"] },
    { id: "TIP2", nombre: "Tipograf칤a II", anio: 3, correlativas: ["TIP1"] },
    { id: "C2", nombre: "Comunicaci칩n II", anio: 3, correlativas: ["C1"] },
    { id: "H2", nombre: "Historia II", anio: 3, correlativas: ["H1"] },
    { id: "ME1", nombre: "Medios Expresivos I", anio: 3, correlativas: ["ELEC1"] },
    { id: "TEC2", nombre: "Tecnolog칤a II", anio: 3, correlativas: ["TEC1"] },

    { id: "DG3", nombre: "Dise침o Gr치fico III", anio: 4, correlativas: ["DG2", "M2", "TIP2", "C1", "H1", "TEC1"] },
    { id: "ME2", nombre: "Medios Expresivos II", anio: 4, correlativas: ["ME1"] },
    { id: "LPP", nombre: "Legislaci칩n y Pr치ctica Profesional", anio: 4, correlativas: ["DG1", "M1", "TIP1", "C1", "H1", "TEC1", "ELEC1"] },
    { id: "ELEC_SH", nombre: "Electiva Socio-Human칤stica", anio: 4, correlativas: ["H2", "C2"] },

    { id: "DG4", nombre: "Dise침o Gr치fico IV", anio: 5, correlativas: ["DG3", "M2", "TIP2"] },
    { id: "ELEC_OR", nombre: "Electiva Orientada I y II", anio: 5, correlativas: ["DG3", "M2", "TIP2"] },
    { id: "OPT", nombre: "Optativas I y II", anio: 5, correlativas: ["DG2", "M1", "TIP1", "C1", "H1", "TEC1"] },
    { id: "SEM_OPT", nombre: "Seminarios Optativos I, II y III", anio: 5, correlativas: ["DG2", "M1", "TIP1", "C1", "H1", "TEC1"] }
  ];

  const container = document.getElementById("malla-container");
  const anios = [1, 2, 3, 4, 5];

  function puedeCursar(materia, aprobadas) {
    // Si no tiene correlativas, siempre puede cursar
    if (!materia.correlativas || materia.correlativas.length === 0) return true;
    // Verifica que todas las correlativas est칠n aprobadas
    return materia.correlativas.every(c => aprobadas.has(c));
  }

  function render() {
    container.innerHTML = "";
    // Obtenemos todas las materias marcadas como aprobadas (checked)
    const aprobadas = new Set(
      [...document.querySelectorAll("input[type=checkbox]:checked")].map(cb => cb.value)
    );

    anios.forEach(anio => {
      const divAnio = document.createElement("div");
      divAnio.className = "anio";
      const h2 = document.createElement("h2");
      h2.textContent = `游늰 ${anio}춿 A침o`;
      divAnio.appendChild(h2);

      materias
        .filter(m => m.anio === anio)
        .forEach(materia => {
          const divMat = document.createElement("div");
          divMat.className = "materia";
          divMat.id = materia.id;

          const habilitado = puedeCursar(materia, aprobadas);

          if (aprobadas.has(materia.id)) {
            divMat.classList.add("aprobada");
          }

          if (!habilitado) {
            divMat.classList.add("bloqueada");
          }

          const checkbox = document.createElement("input");
          checkbox.type = "checkbox";
          checkbox.value = materia.id;
          checkbox.checked = aprobadas.has(materia.id);

          // Deshabilita solo si tiene correlativas y no est치n aprobadas
          checkbox.disabled = !habilitado && materia.correlativas.length > 0;

          checkbox.addEventListener("change", () => render());

          const label = document.createElement("label");
          label.textContent = `${materia.nombre} (${materia.id})`;
          label.style.marginLeft = "8px";

          divMat.appendChild(checkbox);
          divMat.appendChild(label);
          divAnio.appendChild(divMat);
        });

      container.appendChild(divAnio);
    });
  }

  render();
</script>

</body>
</html>
